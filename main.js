(()=>{"use strict";function e(e,t){var r=e.querySelectorAll(".".concat(t.id,"-error"));t.classList.remove(inputErrorClass),r.classList.remove(errorClass),r.textContent=""}function t(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.removeAttribute("disabled",!1),t.classList.remove(inactiveButtonClass)):(t.setAttribute("disabled",!0),t.classList.add(inactiveButtonClass))}var r=document.querySelector("#card-template").content,o=document.querySelector(".places__list");function n(e,t,o,n){var c=r.querySelector(".places__item").cloneNode(!0),u=c.querySelector(".card__delete-button"),i=c.querySelector(".card__like-button"),a=c.querySelector(".card__image");return c.querySelector(".card__image").src=e.link,c.querySelector(".card__image").alt=e.name,c.querySelector(".card__title").textContent=e.name,u.addEventListener("click",t),a.addEventListener("click",n),i.addEventListener("click",o),c}var c=function(e){e.target.classList.toggle("card__like-button_is-active")};function u(e){e.target.closest(".places__item").remove()}var i=function(e){e.classList.add("popup_is-animated"),setTimeout((function(){e.classList.add("popup_is-opened")}),100),document.addEventListener("keydown",l)},a=function(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",l)},l=function(e){"Escape"===e.code&&a(document.querySelector(".popup_is-opened"))},p=function(e){e.target===e.currentTarget&&a(document.querySelector(".popup_is-opened"))},s=document.querySelector(".places__list"),d=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-button"),m=document.querySelector(".popup__image"),y=document.querySelector(".popup__caption"),v=document.querySelectorAll(".popup"),f=document.querySelector(".popup_type_new-card"),S=document.querySelector(".popup_type_image"),q=document.querySelector(".popup_type_edit"),k=document.querySelector(".profile__title"),g=document.querySelector(".profile__description"),b=document.querySelector(".popup__input_type_name"),E=document.querySelector(".popup__input_type_description"),L=document.querySelectorAll(".popup__close"),C=function(e){i(S),m.src=e.target.src,m.alt=e.target.alt,y.textContent=e.target.alt};document.querySelector('form[name="edit-profile"]').addEventListener("submit",(function(e){e.preventDefault();var t=b.value,r=E.value,o=document.querySelector(".profile__title"),n=document.querySelector(".profile__description");o.textContent=t,n.textContent=r,b.value="",E.value="",a(q)}));var h,x=document.querySelector('form[name="new-place"]'),A=x.querySelector(".popup__input_type_card-name"),j=x.querySelector(".popup__input_type_url");x.addEventListener("submit",(function(e){e.preventDefault();var t={name:A.value,link:j.value};A.value="",j.value="";var r=n(t,u,c,C);s.prepend(r),a(f)})),L.forEach((function(e){e.addEventListener("click",(function(e){a(e.target.closest(".popup"))}))})),v.forEach((function(e){e.addEventListener("click",p)})),d.addEventListener("click",(function(){i(q),b.setAttribute("value",k.textContent),E.setAttribute("value",g.textContent)})),_.addEventListener("click",(function(e){e.preventDefault(),i(f)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){!function(e){o.append(e)}(n(e,u,c,C))})),h={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:".popup__button_disabled",inputErrorClass:".popup__input_type_error",errorClass:".popup__error_visible"},Array.from(document.querySelectorAll("".concat(h.formSelector))).forEach((function(r){!function(r){var o=Array.from(r.querySelectorAll(inputSelector)),n=r.querySelector(submitButtonSelector);t(o,n),o.forEach((function(c){c.addEventListener("input",(function(){(function(t,r){r.validity.patternMismatch?r.setCustomValidity(r.dataset.errorMessage):r.setCustomValidity(""),r.validity.valid?e(t,r):function(e,t,r){var o=e.querySelectorAll(".".concat(t.id,"-error"));t.classList.add(inputErrorClass),o.textContent=r,o.classList.add(errorClass)}(t,r,r.validationMessage)})(r,c),t(o,n)}))}))}(r)})),function(r,o){var n=Array.from(r.querySelectorAll(o.inputSelector));t(n,r.querySelector(o.submitButtonSelector)),n.forEach((function(t){e(r,t)}))}(profileForm,validationConfig)})();